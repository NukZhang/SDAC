# 🔄 子 Skill：State Machine（状态机 / 状态管理）

> 适用于：角色状态 / 攻击阶段 / 死亡 / 冲刺 / 冷却  
> 目标：状态可追踪、可回放、边界清晰，不用 if 充当隐式状态

---

## 强制规则

1. 状态仅描述“当前阶段”，不包含行为决策（决策属于 AI/输入系统）  
2. 状态切换必须显式、可追踪（enter/exit 条件清晰）  
3. 状态必须有时间边界或退出条件（timer / condition）  
4. 状态不得跨系统控制逻辑（不在状态里写 AI 或武器结算）

---

## 实现约束

- 状态与动画表现解耦：动画只是呈现，状态是逻辑真相  
- 同一时间只能处于一个主状态（如 idle/move/attack/dead）  
- 子状态不得突破主状态约束（例如 dead 下禁止 attack 子状态）

---

## 绝对禁止

- 隐式状态：用一堆 if/flag 替代可追踪状态  
- 在状态中写 AI 或武器职责（选目标/结算伤害/生成攻击框）  
- 用状态代替冷却/计时器系统（除非 Me2AI 明确要求）
